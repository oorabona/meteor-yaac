<template name="yaac">
  {{#if input}}
    {{#if settings}}
      {{>afYaac setup}}
    {{/if}}
  {{/if}}
</template>

<template name="afYaac">
  {{#with setup}}
  <div class="{{atts.settings.containerClass}}">
    {{#if atts.settings.hasTags}}
    {{#if atts.settings.showTags}}
    {{#each tags}}
    <span class="{{../atts.settings.tagClass}}">
      <span>{{content}}&nbsp;&nbsp;</span>
      <a class="{{../atts.settings.removeTagClass}}"></a>
    </span>
    {{/each}}
    {{/if}}
    {{/if}}
    <div class="{{atts.settings.inputContainerClass}}">
      {{#if atts.settings.showAddTag}}
      <a class="{{atts.settings.addLinkClass}}"><span class="{{atts.settings.addIconClass}}"></span></a>
      {{/if}}
      {{#if atts.settings.inlineSuggestion}}
      <div class="{{atts.settings.inlineContainerClass}}">
        <input {{afInlineInputAtts}}/>  {{! autocomplete disabled input}}
        <input {{afInputTextAtts}}/>    {{! real user input box}}
      </div>
      {{else}}
      <input {{afInputTextAtts}}/>
      {{/if}}
    </div>
    {{#if atts.settings.popoverSuggestions}}
    <div class="{{atts.settings.popoverContainerClass}}">
      <div class="{{atts.settings.popoverInnerClass}}">
        {{#each predictions}}
        <button type="button" tabindex="{{this.tabindex}}" class="{{../atts.settings.btnPredictionClass}} {{../atts.settings.addLinkClass}}">{{content}}</button>
        {{/each}}
      </div>
    </div>
    {{/if}}
  </div>
  {{/with}}
</template>
